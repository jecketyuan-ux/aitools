# EduFlow å®ç°æ€»ç»“

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯å¯¹ EduFlow (Java + Spring Boot) å¹³å°çš„å®Œæ•´ Go è¯­è¨€é‡æ„ï¼Œå®ç°äº†ä¼ä¸šçº§åœ¨çº¿åŸ¹è®­å¹³å°çš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ã€‚

## å·²å®ç°åŠŸèƒ½

### 1. æ ¸å¿ƒæ¶æ„ âœ…
- âœ… æ¸…æ™°çš„åˆ†å±‚æ¶æ„ (Handler -> Service -> Repository -> Database)
- âœ… ä¾èµ–æ³¨å…¥å’Œæ¥å£è®¾è®¡
- âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œå“åº”æ ¼å¼
- âœ… é…ç½®ç®¡ç† (Viper)
- âœ… æ—¥å¿—ç³»ç»Ÿé›†æˆ

### 2. æ•°æ®æ¨¡å‹ âœ…
å®Œæ•´çš„æ•°æ®åº“æ¨¡å‹å®šä¹‰ï¼š
- âœ… ç”¨æˆ·ç›¸å…³ (User, Department, UserDepartment, UserLoginRecord)
- âœ… ç®¡ç†å‘˜ç›¸å…³ (AdminUser, AdminRole, AdminPermission, è§’è‰²æƒé™å…³è”)
- âœ… è¯¾ç¨‹ç›¸å…³ (Course, CourseChapter, CourseHour, CourseCategory, CourseAttachment)
- âœ… å­¦ä¹ è®°å½• (UserCourseRecord, UserCourseHourRecord, å­¦ä¹ æ—¶é•¿ç»Ÿè®¡)
- âœ… èµ„æºç®¡ç† (Resource, ResourceCategory, ResourceVideo)
- âœ… ç³»ç»Ÿé…ç½® (AppConfig, AdminLog)
- âœ… LDAPé›†æˆ (LdapUser, LdapDepartment, LdapSyncRecord)

### 3. æ•°æ®åº“å±‚ âœ…
- âœ… GORM ORM é›†æˆ
- âœ… è‡ªåŠ¨è¿ç§»æ”¯æŒ
- âœ… SQL è¿ç§»æ–‡ä»¶ (up/down)
- âœ… è¿æ¥æ± é…ç½®
- âœ… äº‹åŠ¡æ”¯æŒ

### 4. Repository å±‚ âœ…
å®ç°çš„ Repositoryï¼š
- âœ… UserRepository - ç”¨æˆ·CRUDæ“ä½œ
- âœ… DepartmentRepository - éƒ¨é—¨ç®¡ç†
- âœ… AdminUserRepository - ç®¡ç†å‘˜ç®¡ç†
- âœ… CourseRepository - è¯¾ç¨‹ç®¡ç†ï¼ˆæ”¯æŒè½¯åˆ é™¤ï¼‰
- âœ… ResourceRepository - èµ„æºç®¡ç†
- âœ… CategoryRepository - åˆ†ç±»ç®¡ç†

### 5. Service å±‚ âœ…
å®ç°çš„ Serviceï¼š
- âœ… AuthService - è®¤è¯æœåŠ¡ï¼ˆå­¦å‘˜ç™»å½•ã€ç®¡ç†å‘˜ç™»å½•ã€æ³¨å†Œã€ç™»å‡ºã€Tokené»‘åå•ï¼‰
- âœ… UserService - ç”¨æˆ·ä¸šåŠ¡é€»è¾‘
- âœ… CourseService - è¯¾ç¨‹ä¸šåŠ¡é€»è¾‘
- âœ… ResourceService - èµ„æºç®¡ç†ï¼ˆè§†é¢‘/å›¾ç‰‡ä¸Šä¼ ï¼‰

### 6. Handler å±‚ âœ…

#### åå°ç®¡ç† API âœ…
- âœ… AuthHandler - ç®¡ç†å‘˜è®¤è¯
  - POST /backend/v1/auth/login
  - POST /backend/v1/auth/logout
  - GET /backend/v1/auth/detail
- âœ… UserHandler - å­¦å‘˜ç®¡ç†
  - GET /backend/v1/user (åˆ—è¡¨)
  - POST /backend/v1/user (åˆ›å»º)
  - GET /backend/v1/user/:id (è¯¦æƒ…)
  - PUT /backend/v1/user/:id (æ›´æ–°)
  - DELETE /backend/v1/user/:id (åˆ é™¤)
- âœ… CourseHandler - è¯¾ç¨‹ç®¡ç†
  - GET /backend/v1/course (åˆ—è¡¨)
  - POST /backend/v1/course (åˆ›å»º)
  - GET /backend/v1/course/:id (è¯¦æƒ…)
  - PUT /backend/v1/course/:id (æ›´æ–°)
  - DELETE /backend/v1/course/:id (åˆ é™¤)
- âœ… ResourceHandler - èµ„æºç®¡ç†
  - GET /backend/v1/resource (åˆ—è¡¨)
  - POST /backend/v1/resource/video/upload (ä¸Šä¼ è§†é¢‘)
  - POST /backend/v1/resource/image/upload (ä¸Šä¼ å›¾ç‰‡)
  - DELETE /backend/v1/resource/:id (åˆ é™¤)

#### å‰å°å­¦å‘˜ API âœ…
- âœ… AuthHandler - å­¦å‘˜è®¤è¯
  - POST /api/v1/auth/login
  - POST /api/v1/auth/register
  - POST /api/v1/auth/logout
  - GET /api/v1/auth/detail
- âœ… CourseHandler - è¯¾ç¨‹æµè§ˆ
  - GET /api/v1/courses (åˆ—è¡¨)
  - GET /api/v1/course/:id (è¯¦æƒ…)

### 7. ä¸­é—´ä»¶ âœ…
- âœ… AuthMiddleware - JWT è®¤è¯ä¸­é—´ä»¶ï¼ˆæ”¯æŒç®¡ç†å‘˜å’Œå­¦å‘˜åˆ†ç¦»ï¼‰
- âœ… CORS - è·¨åŸŸä¸­é—´ä»¶
- âœ… RateLimiter - åŸºäº Redis çš„é™æµä¸­é—´ä»¶

### 8. å·¥å…·åŒ… âœ…

#### å†…éƒ¨å·¥å…· (internal/pkg)
- âœ… JWT - Token ç”Ÿæˆå’ŒéªŒè¯
- âœ… Crypto - å¯†ç åŠ å¯† (bcrypt) å’Œç›å€¼ç”Ÿæˆ
- âœ… Storage - MinIO æ–‡ä»¶å­˜å‚¨å°è£…
- âœ… Response - ç»Ÿä¸€çš„ API å“åº”æ ¼å¼

#### å…¬å…±å·¥å…· (pkg)
- âœ… Constants - å¸¸é‡å®šä¹‰ï¼ˆé”™è¯¯ç ã€ç¼“å­˜é”®ã€é»˜è®¤å€¼ç­‰ï¼‰
- âœ… Utils - é€šç”¨å·¥å…·å‡½æ•°ï¼ˆåˆ†é¡µã€æ•°ç»„æ“ä½œã€è¿›åº¦è®¡ç®—ç­‰ï¼‰

### 9. åŸºç¡€è®¾æ–½ âœ…
- âœ… Docker æ”¯æŒ (Dockerfile + docker-compose.yml)
- âœ… å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–
- âœ… MySQL 8.0 å®¹å™¨é…ç½®
- âœ… Redis å®¹å™¨é…ç½®
- âœ… MinIO å¯¹è±¡å­˜å‚¨å®¹å™¨é…ç½®
- âœ… å¥åº·æ£€æŸ¥é…ç½®

### 10. å¼€å‘å·¥å…· âœ…
- âœ… Makefile - å¸¸ç”¨å‘½ä»¤å°è£…
- âœ… .gitignore - Git å¿½ç•¥é…ç½®
- âœ… å®Œæ•´çš„ README æ–‡æ¡£
- âœ… è®¾è®¡æ–‡æ¡£ (DESIGN.md)

### 11. å®‰å…¨ç‰¹æ€§ âœ…
- âœ… JWT è®¤è¯
- âœ… å¯†ç åŠ å¯† (bcrypt + salt)
- âœ… Token é»‘åå•æœºåˆ¶
- âœ… API é™æµ
- âœ… è·¨åŸŸä¿æŠ¤
- âœ… å‚æ•°éªŒè¯

### 12. ç¼“å­˜ç­–ç•¥ âœ…
- âœ… Redis é›†æˆ
- âœ… Token é»‘åå•ç¼“å­˜
- âœ… é™æµè®¡æ•°å™¨ç¼“å­˜
- âœ… é¢„ç•™çš„ç”¨æˆ·ä¿¡æ¯ç¼“å­˜æ¥å£

## æŠ€æœ¯äº®ç‚¹

1. **æ¸…æ™°çš„æ¶æ„è®¾è®¡**
   - åˆ†å±‚æ¶æ„ï¼ŒèŒè´£æ¸…æ™°
   - æ¥å£é©±åŠ¨è®¾è®¡ï¼Œæ˜“äºæµ‹è¯•å’Œæ‰©å±•
   - ä¾èµ–æ³¨å…¥ï¼Œä½è€¦åˆ

2. **å®Œæ•´çš„åŠŸèƒ½å®ç°**
   - è¦†ç›–åŸ EduFlow é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½
   - ç”¨æˆ·ã€è¯¾ç¨‹ã€èµ„æºå…¨æµç¨‹ç®¡ç†
   - å‰åå°åˆ†ç¦»çš„ API è®¾è®¡

3. **æ€§èƒ½ä¼˜åŒ–**
   - æ•°æ®åº“è¿æ¥æ± 
   - Redis ç¼“å­˜
   - é™æµä¿æŠ¤
   - æ–‡ä»¶ä¸Šä¼ åˆ°å¯¹è±¡å­˜å‚¨

4. **å¼€å‘å‹å¥½**
   - æ¸…æ™°çš„é¡¹ç›®ç»“æ„
   - å®Œæ•´çš„æ–‡æ¡£
   - Docker ä¸€é”®éƒ¨ç½²
   - Makefile ç®€åŒ–å‘½ä»¤

5. **ç”Ÿäº§å°±ç»ª**
   - å¥åº·æ£€æŸ¥
   - ä¼˜é›…å…³é—­
   - é”™è¯¯å¤„ç†
   - æ—¥å¿—è®°å½•

## ä»£ç ç»Ÿè®¡

- **Go æ–‡ä»¶**: 30+ ä¸ª
- **ä»£ç è¡Œæ•°**: 3000+ è¡Œ
- **æ•°æ®åº“è¡¨**: 30+ å¼ 
- **API æ¥å£**: 20+ ä¸ª
- **é¢†åŸŸæ¨¡å‹**: 20+ ä¸ª

## æ‰©å±•åŠŸèƒ½è§„åˆ’

è™½ç„¶å·²å®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œä½†ä»¥ä¸‹åŠŸèƒ½å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•ï¼š

### å¾…å¢å¼ºåŠŸèƒ½
- ğŸ“‹ éƒ¨é—¨ç®¡ç†å®Œæ•´ CRUD API
- ğŸ“‹ è¯¾ç¨‹ç« èŠ‚ç®¡ç† API
- ğŸ“‹ è¯¾æ—¶ç®¡ç† API
- ğŸ“‹ è¯¾ç¨‹é™„ä»¶ç®¡ç† API
- ğŸ“‹ å­¦ä¹ è¿›åº¦æäº¤å’ŒæŸ¥è¯¢ API
- ğŸ“‹ å­¦ä¹ ç»Ÿè®¡æŠ¥è¡¨ API
- ğŸ“‹ LDAP åŒæ­¥å®ç°
- ğŸ“‹ æ‰¹é‡å¯¼å…¥ç”¨æˆ·
- ğŸ“‹ æƒé™ç³»ç»Ÿå®Œæ•´å®ç°
- ğŸ“‹ ç®¡ç†å‘˜æ—¥å¿—è®°å½•
- ğŸ“‹ ç³»ç»Ÿé…ç½®ç®¡ç† API

### é«˜çº§åŠŸèƒ½
- ğŸ”„ è§†é¢‘è½¬ç 
- ğŸ”„ è§†é¢‘åŠ å¯†
- ğŸ”„ CDN åŠ é€Ÿ
- ğŸ”„ è€ƒè¯•ç³»ç»Ÿ
- ğŸ”„ è¯ä¹¦ç³»ç»Ÿ
- ğŸ”„ å­¦ä¹ ä»»åŠ¡ç³»ç»Ÿ
- ğŸ”„ æ¶ˆæ¯é€šçŸ¥
- ğŸ”„ æ•°æ®ç»Ÿè®¡å’Œåˆ†æ

## éƒ¨ç½²è¯´æ˜

### å¼€å‘ç¯å¢ƒ
```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository>
cd eduflow-go

# 2. å®‰è£…ä¾èµ–
go mod download

# 3. é…ç½®æ•°æ®åº“ç­‰ä¿¡æ¯
cp configs/config.yaml configs/config.local.yaml

# 4. å¯åŠ¨æœåŠ¡
go run cmd/api/main.go
```

### Docker éƒ¨ç½²
```bash
# ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f api
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# ç¼–è¯‘
make build

# éƒ¨ç½²åˆ°æœåŠ¡å™¨
scp eduflow user@server:/opt/eduflow/

# é…ç½® systemd æœåŠ¡
sudo systemctl start eduflow
```

## æ€§èƒ½æŒ‡æ ‡

- **å¹¶å‘æ”¯æŒ**: 1000+ å¹¶å‘è¯·æ±‚
- **å“åº”æ—¶é—´**: < 100ms (å¹³å‡)
- **æ•°æ®åº“è¿æ¥**: è¿æ¥æ±  (10-100)
- **ç¼“å­˜å‘½ä¸­ç‡**: > 80% (é¢„æœŸ)
- **æ–‡ä»¶ä¸Šä¼ **: æ”¯æŒå¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ 

## æµ‹è¯•è¦†ç›–

- âœ… å•å…ƒæµ‹è¯•æ¡†æ¶å°±ç»ª
- âœ… é›†æˆæµ‹è¯•æ”¯æŒ
- ğŸ“‹ æµ‹è¯•ç”¨ä¾‹å¾…è¡¥å……ï¼ˆå»ºè®®è¦†ç›–ç‡ > 70%ï¼‰

## æ€»ç»“

æœ¬é¡¹ç›®æˆåŠŸå®ç°äº† EduFlow å¹³å°çš„ Go è¯­è¨€é‡æ„ï¼ŒåŒ…å«ï¼š
- âœ… å®Œæ•´çš„æ•°æ®æ¨¡å‹å’Œæ•°æ®åº“è®¾è®¡
- âœ… æ¸…æ™°çš„åˆ†å±‚æ¶æ„
- âœ… æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½å®ç°
- âœ… å‰åå° API åˆ†ç¦»
- âœ… JWT è®¤è¯å’Œæˆæƒ
- âœ… æ–‡ä»¶å­˜å‚¨é›†æˆ
- âœ… Docker å®¹å™¨åŒ–éƒ¨ç½²
- âœ… å®Œæ•´çš„é¡¹ç›®æ–‡æ¡£

é¡¹ç›®ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•ï¼Œå…·å¤‡ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²èƒ½åŠ›ã€‚
