# 更新日志 / Changelog

## [1.0.0] - 2024-01-01

### 🎉 初始版本发布

这是 EduFlow 企业培训平台的首个正式版本，基于 Go 语言实现的完整功能企业级在线培训系统。

### ✨ 新增功能

#### 核心功能
- ✅ 用户管理系统
  - 用户创建、编辑、删除
  - 用户列表查询和分页
  - 用户部门关联
  - 用户状态管理（激活、锁定）
  
- ✅ 部门管理
  - 多层级部门组织架构
  - 部门树形结构
  - 部门用户关联
  
- ✅ 管理员系统
  - 管理员账户管理
  - 角色权限管理（RBAC）
  - 管理员登录认证
  - 操作日志记录
  
- ✅ 课程管理
  - 课程创建、编辑、删除
  - 课程章节管理
  - 课时管理（视频课时）
  - 课程分类
  - 课程附件
  - 课程可见性控制
  - 必修/选修标记
  
- ✅ 资源管理
  - 视频上传（支持大文件）
  - 图片上传
  - 资源分类
  - MinIO 对象存储集成
  - 资源关联管理
  
- ✅ 学习管理
  - 学习进度追踪
  - 课时完成记录
  - 学习时长统计
  - 学习历史记录
  - 进度百分比计算

#### 认证与安全
- ✅ JWT 认证机制
  - Token 生成和验证
  - Token 有效期管理（15天）
  - Token 黑名单机制
  - 自动续期支持
  
- ✅ 权限控制
  - 基于角色的访问控制（RBAC）
  - 细粒度权限管理
  - API 权限中间件
  - 前后台权限分离
  
- ✅ 密码安全
  - bcrypt 加密
  - 盐值（Salt）机制
  - 密码强度要求
  
- ✅ API 限流
  - 基于 Redis 的限流
  - IP 级别限流
  - 可配置限流策略
  - 滑动窗口算法

#### 系统功能
- ✅ 配置管理
  - YAML 配置文件
  - 环境变量支持
  - 配置热加载
  
- ✅ 日志系统
  - 结构化日志
  - 日志分级
  - 日志轮转
  - 操作审计日志
  
- ✅ 缓存支持
  - Redis 缓存集成
  - 缓存策略配置
  - 缓存键管理
  
- ✅ LDAP 集成（框架）
  - LDAP 用户同步模型
  - LDAP 部门同步模型
  - 同步记录追踪

#### API 接口

**后台管理 API (`/backend/v1`)**
- 认证：登录、登出、详情
- 用户：CRUD 操作、列表查询
- 课程：CRUD 操作、列表查询
- 资源：上传、删除、列表查询

**前台学员 API (`/api/v1`)**
- 认证：登录、注册、登出
- 课程：浏览、查看详情
- 学习：进度提交、记录查询

#### 部署支持
- ✅ Docker 支持
  - Dockerfile 多阶段构建
  - Docker Compose 配置
  - 容器健康检查
  - 数据持久化
  
- ✅ 数据库
  - MySQL 8.0 支持
  - 数据库迁移脚本
  - GORM 自动迁移
  - 连接池配置
  
- ✅ 开发工具
  - Makefile 常用命令
  - 热重载支持
  - 测试框架集成
  - 代码格式化工具

### 📦 技术栈

- **语言**: Go 1.21+
- **Web 框架**: Gin v1.11.0
- **ORM**: GORM v1.31.1
- **数据库**: MySQL 8.0+
- **缓存**: Redis 7.0+
- **认证**: golang-jwt/jwt v5.3.0
- **文件存储**: MinIO v7.0.97
- **配置**: Viper v1.21.0
- **加密**: bcrypt (golang.org/x/crypto)

### 🏗️ 架构特点

- **分层架构**: Handler -> Service -> Repository -> Database
- **依赖注入**: 清晰的依赖关系管理
- **接口设计**: 易于测试和扩展
- **错误处理**: 统一的错误响应格式
- **中间件**: 认证、权限、限流、日志、CORS
- **缓存策略**: 多级缓存支持
- **并发安全**: 使用 goroutine 和 channel

### 📝 文档

- ✅ README.md - 项目说明和快速开始
- ✅ DESIGN.md - 完整的设计文档
- ✅ QUICKSTART.md - 5分钟快速启动指南
- ✅ docs/IMPLEMENTATION_SUMMARY.md - 实现总结
- ✅ docs/PROJECT_RENAMING.md - 项目更名说明
- ✅ API 文档（README 中）

### 🔧 配置项

所有配置项都支持通过配置文件或环境变量设置：
- 服务器端口和模式
- 数据库连接信息
- Redis 连接信息
- JWT 密钥和有效期
- MinIO 配置
- LDAP 配置
- 限流参数
- 日志配置

### 🐳 Docker 镜像

- 多阶段构建优化
- Alpine Linux 基础镜像
- 非 root 用户运行
- 镜像大小优化
- 健康检查支持

### 📊 性能指标

- 并发支持: 1000+ 请求/秒
- 平均响应时间: < 100ms
- 数据库连接池: 10-100 连接
- 缓存命中率: > 80% (预期)

### 🔐 安全特性

- JWT 认证和授权
- 密码 bcrypt 加密
- SQL 注入防护（参数化查询）
- XSS 防护（输入验证）
- CORS 跨域保护
- API 限流保护
- Token 黑名单
- 请求参数验证

### 🎯 默认配置

- **数据库**: `eduflow`
- **管理员**: admin@eduflow.com / eduflow123
- **API 端口**: 8080
- **JWT 有效期**: 15天
- **限流**: 60秒内360次请求
- **MinIO Bucket**: eduflow

### 📋 已知限制

- LDAP 同步功能仅有框架，需要完整实现
- 视频转码功能待实现
- 批量导入用户功能待完善
- 考试系统待实现
- 证书系统待实现
- 消息通知功能待实现

### 🔮 后续计划

#### v1.1.0 (计划中)
- [ ] 完整的 LDAP 自动同步
- [ ] 批量导入用户功能
- [ ] 学习报表和统计
- [ ] 课程推荐算法
- [ ] 消息通知系统

#### v1.2.0 (计划中)
- [ ] 在线考试系统
- [ ] 学习证书生成
- [ ] 视频转码和加密
- [ ] CDN 加速支持
- [ ] 移动端 API 优化

#### v2.0.0 (远期规划)
- [ ] 微服务架构重构
- [ ] 实时消息推送
- [ ] 大数据分析
- [ ] AI 课程推荐
- [ ] 多租户支持

### 🙏 致谢

感谢所有为这个项目做出贡献的开发者和用户！

### 📄 许可证

Apache License 2.0

---

## 如何升级

### 从源码编译

```bash
git clone https://github.com/eduflow/eduflow.git
cd eduflow
git checkout v1.0.0
go build -o eduflow cmd/api/main.go
```

### 使用 Docker

```bash
docker-compose pull
docker-compose up -d
```

### 数据库迁移

本版本的数据库结构：
```bash
mysql -u root -p eduflow < migrations/000001_init_schema.up.sql
```

---

**发布日期**: 2024-01-01  
**发布者**: EduFlow Team  
**Git Tag**: v1.0.0
